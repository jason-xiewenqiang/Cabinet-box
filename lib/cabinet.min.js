!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Cabinet=t():e.Cabinet=t()}(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var n=i(1),r=i(2),o=i(5),a=i(6),s=i(8),c=i(9),h=i(10),u=i(11);t.default=function(e){var t={switchTop:11.5,serverTop:21.5,serverHeight:4,serverSpacing:2.1,maxServerCount:11},i=[{name:"机柜1",wd:30,sd:30},{name:"机柜2",wd:30,sd:30},{name:"机柜3",wd:30,sd:30}];Object(u.render)(i,e),setInterval((function(){Object(u.render)(i,e)}),3e3);var d=new r.default({parent:e?document.querySelector(e):window}),l=new a.default(-32,0,"机柜1",d),E=new a.default(0,0,"机柜2",d),p=new a.default(32,0,"机柜3",d);new s.default(d,l,t.switchTop),new s.default(d,E,t.switchTop),new s.default(d,p,t.switchTop);new h.default({height:90,scene:d,cabinet:E});var f=new h.default({height:90,scene:d,cabinet:l});new h.default({height:90,scene:d,cabinet:p});!function e(){var t=new THREE.MeshBasicMaterial({color:Object(n.randomColor)()});f.group.children.forEach((function(e){e.material=t})),setTimeout((function(){e()}),5e3*Math.random())}();var T=new c.default({y:3,radius:1,scene:d,cabinet:E}),w=new c.default({y:3,radius:1,scene:d,cabinet:l}),v=new c.default({y:3,radius:1,scene:d,cabinet:p}),m=T.group.children[0],b=w.group.children[0],H=v.group.children[0];setInterval((function(){var e;e=new THREE.MeshBasicMaterial({color:Object(n.randomColor)()}),m.material=e,b.material=e,H.material=e}),3e3);for(var R=0;R<t.maxServerCount;R++)new o.default(d,l,t.serverTop+R*(t.serverHeight+t.serverSpacing)),new o.default(d,E,t.serverTop+R*(t.serverHeight+t.serverSpacing)),new o.default(d,p,t.serverTop+R*(t.serverHeight+t.serverSpacing))}},function(e,t,i){"use strict";i.r(t),i.d(t,"loadTexture",(function(){return n})),i.d(t,"randomColor",(function(){return r}));var n=function(e,t){return(new THREE.TextureLoader).load(e,(function(){t()}))},r=function(){for(var e="#",t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],i=0;i<6;i++){e+=t[parseInt(16*Math.random())]}return e}},function(e,t,i){"use strict";i.r(t);var n=i(3),r=i.n(n),o=i(4),a=i.n(o),s=i(1),c=function(){function e(t){r()(this,e),console.log("params",t),this.parent=t.parent,this.scene=new THREE.Scene,this.scene.position.set(0,-40,5),this.camera=this.initCamera(t.parent),this.particle=null,this.particles=[],this.AMOUNTX=100,this.AMOUNTY=70,this.SEPARATION=80,this.count=0,this.dev=t&&t.dev,this.initLight(),this.initRenderer(t.parent),this.initTexture(),this.initFloor(),t&&t.dev&&this.stats(t.parent),this.initWave(),this.render(),this.initControls(),this.animate(),window.addEventListener("resize",this.onResize.bind(this,t.parent),!1),window.addEventListener("dblclick",this.injectHandler.bind(this,t.parent),!1)}return a()(e,[{key:"initCamera",value:function(e){var t=e?e.offsetWidth:window.innerWidth,i=e?e.offsetHeight:window.innerHeight,n=new THREE.PerspectiveCamera(45,t/i,1,1e4);return n.position.set(0,30,200),n}},{key:"initLight",value:function(){this.dircLight=new THREE.DirectionalLight(16777215),this.dircLight.position.set(300,400,200),this.scene.add(this.dircLight);var e=new THREE.HemisphereLight(12403,169879,.75);e.position.set(.5,1,.75),this.scene.add(e)}},{key:"initRenderer",value:function(e){var t=e?e.offsetWidth:window.innerWidth,i=e?e.offsetHeight:window.innerHeight;this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(t,i),this.renderer.setClearColor("#00272f"),e?e.appendChild(this.renderer.domElement):document.body.appendChild(this.renderer.domElement)}},{key:"initTexture",value:function(){var e=this;this.floorTexture=Object(s.loadTexture)("images/floor.png",(function(){e.render()})),this.floorTexture.wrapS=THREE.RepeatWrapping,this.floorTexture.wrapT=THREE.RepeatWrapping,this.floorTexture.repeat.set(1,1)}},{key:"initFloor",value:function(){var e=new THREE.BoxGeometry(300,0,200),t=new THREE.MeshLambertMaterial({color:16777215,map:this.floorTexture,transparent:!0});this.floor=new THREE.Mesh(e,t),this.floor.position.set(0,-1,0),this.scene.add(this.floor)}},{key:"initWave",value:function(){for(var e=2*Math.PI,t=new THREE.PointCloudMaterial({color:14737632,program:function(t){t.beginPath(),t.arc(0,0,16,0,e),t.fill()}}),i=0,n=0;n<this.AMOUNTX;n++)for(var r=0;r<this.AMOUNTY;r++)this.particle=this.particles[i++]=new THREE.Sprite(t),this.particle.position.x=n*this.SEPARATION-this.AMOUNTX*this.SEPARATION/2,this.particle.position.z=r*this.SEPARATION-this.AMOUNTY*this.SEPARATION/2,this.scene.add(this.particle)}},{key:"render",value:function(){TWEEN.update();for(var e=0,t=0;t<this.AMOUNTX;t++)for(var i=0;i<this.AMOUNTY;i++)this.particle=this.particles[e++],this.particle.position.y=50*Math.sin(.3*(t+this.count))+50*Math.sin(.5*(i+this.count))-100,this.particle.scale.x=this.particle.scale.y=2*(Math.sin(.3*(t+this.count))+1)+2*Math.sin(.5*(i+this.count)+1);this.renderer.render(this.scene,this.camera),this.count+=.2}},{key:"initControls",value:function(){this.controls=new THREE.OrbitControls(this.camera),this.controls.addEventListener("change",this.render.bind(this)),this.controls.maxDistance=2e3}},{key:"onResize",value:function(e){var t=e?e.offsetWidth:window.innerWidth,i=e?e.offsetHeight:window.innerHeight;this.camera.aspect=t/i,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,i)}},{key:"injectHandler",value:function(e,t){console.log("event",t),console.log("container",e);var i=e?e.offsetWidth:window.innerWidth,n=e?e.offsetHeight:window.innerHeight;t.preventDefault();var r=new THREE.Vector3(t.clientX/i*2-1,-t.clientY/n*2+1,.5);r=r.unproject(this.camera);var o=new THREE.Raycaster(this.camera.position,r.sub(this.camera.position).normalize()).intersectObjects(this.scene.children,!0)[0].object;"door"==o.name&&(0==o.parent.rotation.y?new TWEEN.Tween(o.parent.rotation).to({y:.6*Math.PI},1500).easing(TWEEN.Easing.Elastic.Out).start():new TWEEN.Tween(o.parent.rotation).to({y:0},300).start(),this.controls.update()),"server"===o.name&&(0===o.parent.position.z?new TWEEN.Tween(o.parent.position).to({z:o.parent.position.z+20},500).easing(TWEEN.Easing.Elastic.Out).start():new TWEEN.Tween(o.parent.position).to({z:o.parent.position.z-20},500).easing(TWEEN.Easing.Elastic.Out).start(),this.controls.update()),this.render()}},{key:"stats",value:function(e){this.stats=new Stats,e?e.appendChild(this.stats.dom):document.body.appendChild(this.stats.dom)}},{key:"animate",value:function(){this.render(),this.dev&&this.stats.update(),requestAnimationFrame(this.animate.bind(this))}}]),e}();t.default=c},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},function(e,t,i){"use strict";i.r(t);var n=i(3),r=i.n(n),o=i(4),a=i.n(o),s=(i(1),function(){function e(t,i,n){r()(this,e),this.x=i.x,this.z=i.z,this.y=0,this.h=n,this.build(t)}return a()(e,[{key:"build",value:function(e){var t=new THREE.Group;t.position.set(this.x,this.y,this.z);var i=new THREE.BoxGeometry(24,3.5,36),n=new THREE.MeshBasicMaterial({color:5159679,opacity:.7,transparent:!0,side:THREE.DoubleSide}),r=new THREE.Mesh(i,n);r.position.set(0,this.h,2),r.name="server";new THREE.BoxGeometry(26.4,4,.2);[].push(n,n,n,n,n,n),t.add(r),e.scene.add(t)}}]),e}());t.default=s},function(e,t,i){"use strict";i.r(t);var n=i(3),r=i.n(n),o=i(4),a=i.n(o),s=i(7),c=i.n(s),h=(i(1),function(){function e(t,i,n,o){r()(this,e),c()(this,"_bottomWidth",30),c()(this,"_bottomLength",40),this.x=t,this.z=i,this.y=0,this.number=n,this.buildBox(o)}return a()(e,[{key:"buildBox",value:function(e){var t=new THREE.Group;t.position.set(this.x,this.y,this.z),t.name="CabinetGroup";var i=new THREE.MeshLambertMaterial({color:31487,transparent:!0,side:THREE.DoubleSide,opacity:1,map:this.gradientTexure()}),n=new THREE.MeshBasicMaterial({color:31487,transparent:!0,side:THREE.DoubleSide,opacity:1}),r=new THREE.BoxGeometry(this._bottomWidth,2,this._bottomLength),o=new THREE.Mesh(r,n);o.position.set(0,1,0);var a=new THREE.BoxGeometry(2,88,this._bottomLength),s=[];s.push(i,i,i,i,new THREE.MeshBasicMaterial({color:5159679,transparent:!0,opacity:.5,side:THREE.DoubleSide}),i);var c=new THREE.MeshFaceMaterial(s),h=new THREE.Mesh(a,c);h.position.set(this._bottomWidth/2-1,46,0);var u=new THREE.BoxGeometry(2,88,this._bottomLength),d=[];d.push(i,i,i,i,new THREE.MeshBasicMaterial({color:5159679,transparent:!0,side:THREE.DoubleSide,opacity:.5}),i);var l=new THREE.MeshFaceMaterial(d),E=new THREE.Mesh(u,l);E.position.set(-this._bottomWidth/2+1,46,0);var p=new THREE.BoxGeometry(this._bottomWidth-4,88,2),f=new THREE.Mesh(p,i);f.position.set(0,46,0-this._bottomLength/2+1);var T=new THREE.BoxGeometry(this._bottomWidth,2,this._bottomLength),w=[];w.push(i,i,new THREE.MeshLambertMaterial({color:31487,transparent:!0,opacity:1,side:THREE.DoubleSide,map:this.gradientTexure()}),i,i,i);var v=new THREE.MeshFaceMaterial(w),m=new THREE.Mesh(T,v);m.position.set(0,91,0),m.name="cabTop",t.add(o,h,E,f,m);var b=new THREE.Group;b.position.set(this.x+15,this.y,this.z+20),b.name=this.number;var H=new THREE.BoxGeometry(this._bottomWidth,92,1),R=[],y=new THREE.MeshLambertMaterial({color:31487,opacity:.3,transparent:!0,side:THREE.DoubleSide});R.push(y,y,y,y,new THREE.MeshLambertMaterial({map:this.gradientTexure(),transparent:!0,opacity:.2,side:THREE.DoubleSide}),new THREE.MeshLambertMaterial({map:this.gradientTexure(),transparent:!0,opacity:.5,side:THREE.DoubleSide}));var M=new THREE.MeshFaceMaterial(R),g=new THREE.Mesh(H,M);g.name="door",g.position.set(-this._bottomWidth/2,46,.5),b.add(g),e.scene.add(t,b)}},{key:"gradientTexure",value:function(){var e=document.createElement("canvas");e.width=256,e.height=1024;var t=e.getContext("2d"),i=t.createLinearGradient(0,1024,1024,0);i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(.68,"rgba(0,122,255,1)"),i.addColorStop(.7,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,122,255,1)"),t.fillStyle=i,t.fillRect(0,0,256,1024);var n=new THREE.Texture(e);return n.needsUpdate=!0,n}}]),e}());t.default=h},function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},function(e,t,i){"use strict";i.r(t);var n=i(3),r=i.n(n),o=i(4),a=i.n(o),s=(i(1),function(){function e(t,i,n){r()(this,e),this.x=i.x,this.z=i.z,this.h=n,this.build(t)}return a()(e,[{key:"build",value:function(e){var t=new THREE.Group;t.position.set(this.x,0,this.z);var i=new THREE.BoxGeometry(24,11.5,36),n=new THREE.MeshBasicMaterial({color:5159679,opacity:.7,transparent:!0,side:THREE.DoubleSide}),r=new THREE.Mesh(i,n);r.position.set(0,this.h,2);var o=new THREE.BoxGeometry(26.3,12,.2),a=new THREE.MeshBasicMaterial({color:5159679,opacity:.5,transparent:!0,side:THREE.DoubleSide}),s=[];s.push(a,a,a,a,new THREE.MeshBasicMaterial({color:5159679,transparent:!0,opacity:.5,side:THREE.DoubleSide}),a);var c=new THREE.MeshFaceMaterial(s);new THREE.Mesh(o,c).position.set(0,this.h,20.1),t.add(r),e.scene.add(t)}}]),e}());t.default=s},function(e,t,i){"use strict";i.r(t);var n=i(3),r=i.n(n),o=i(4),a=i.n(o),s=(i(1),function(){function e(t){r()(this,e),this.x=t.cabinet.x,this.y=t.y||0,this.z=t.cabinet.z,this.radius=t.radius,this.build(t.scene)}return a()(e,[{key:"build",value:function(e){var t=new THREE.Group;t.position.set(this.x,this.y,this.z);var i=new THREE.MeshBasicMaterial({color:"pink"}),n=new THREE.Vector3(-12,0,18.5),r=new THREE.Vector3(-12,0,-17),o=new THREE.Vector3(12,0,-17),a=new THREE.Vector3(12,0,18.5),s=new THREE.LineCurve3(n,r),c=new THREE.CatmullRomCurve3([r,o]),h=new THREE.LineCurve3(o,a),u=new THREE.CurvePath;u.curves.push(s,c,h);var d=new THREE.TubeGeometry(u,200,.2,25,!0),l=new THREE.Mesh(d,i);t.add(l),this.group=t,e.scene.add(t)}}]),e}());t.default=s},function(e,t,i){"use strict";i.r(t);var n=i(3),r=i.n(n),o=i(4),a=i.n(o),s=function(){function e(t){r()(this,e),this.x=t.cabinet.x,this.z=t.cabinet.z,this.y=0,this.h=t.height,this.build(t.scene)}return a()(e,[{key:"build",value:function(e){var t=new THREE.Group;t.position.set(this.x,this.y,this.z);var i=new THREE.LineBasicMaterial({color:31487}),n=new THREE.LineBasicMaterial({color:31487}),r=new THREE.CylinderGeometry(4,4,1,25),o=new THREE.CylinderGeometry(3,0,1,25),a=new THREE.Mesh(r,i),s=new THREE.Mesh(o,n);a.position.set(0,this.h,0),s.position.set(0,this.h-1,0),t.add(a),t.add(s),this.group=t,e.scene.add(t)}}]),e}();t.default=s},function(e,t,i){"use strict";i.r(t),i.d(t,"render",(function(){return n}));var n=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=JSON.parse(JSON.stringify(e)),r=!!document.querySelector(".cabinet-info");(t=document.querySelector(".cabinet-info")?document.querySelector(".cabinet-info"):document.createElement("div")).className="cabinet-info",t.innerHTML="";var o="";Array.isArray(n)&&(n.forEach((function(e){e.wd=(e.wd+10*Math.random()).toFixed(1),e.sd=(e.sd+10*Math.random()).toFixed(1),o+='<div class="info-item">\n                <ul>\n                  <li>'.concat(e.name,'</li>\n                  <li>温度：<span style="color: ').concat(e.wd>35?"red":"",';">').concat(e.wd,'</span>℃</li>\n                  <li>湿度：<span style="color: ').concat(e.sd>35?"red":"",';">').concat(e.sd,"</span>℃</li>\n                </ul>\n              </div>\n            ")})),t.innerHTML=o,r||document.querySelector(i).appendChild(t))}}]).default}));